<html>
  <head>
    <title>IrrOde Tutorial 02 - Project Setup - Visual C++</title>
	<style type="text/css">

#mainFrame
{
  border: 1px solid #4466FF;
  position: absolute;
  left: 10px;
  top: 10px;
  width: 640px;
  overflow: auto;
  padding: 5px;
  margin: 0px;
  font-family: Arial;
  font-size: 10pt;
  background-color: #CCDDFF;
  text-align: justify;
}

img {
 margin: 5px;
}

pre {
  padding: 5px;
  margin: 5px;
  background-color: #DDEEFF;
  border: 1px solid #4466FF;
  font-size: 10pt;
}

    </style>
  </head>
  <body>
    <div id="mainFrame">
	  Welcome to the second tutorial for <a href="http://bulletbyte.de/products.php?sub=irr&show=irrode">IrrODE</a>. IrrODE is a wrapper for the
	  <a href="http://opende.sourceforge.net">ODE</a> physics library and <a href="http://irrlicht.sourceforge.net">Irrlicht</a>. In this tutorial
	  I'll show you how to set up the Microsoft VisualC++ 2008 compiler and how to create a simple IrrODE program. I assume you have 
	  downloaded Irrlicht and ODE and compiled an ODE library. In this tutorial we will develop a &quot;helloIrrOdeWorld&quot; 
	  example application.<br /><br />
	  <b>Step 1: setting up the project</b><br />
	  Use the VisualC++ project creation wizard and create a commandline project.<br />
	  <img src="pix/wizard.jpg" alt="the Code::Blocks project creation wizard" /><br />
	  Remove all files except &quot;helloOdeWorld.cpp&quot; from the project. These files are not needed. Now go to the &quot;project options&quot;
	  wizard. Set the &quot;use precomiled headers&quot; option to &quot;don't use precompiled headers&quot;<br />
	  <img src="pix/precompiled.jpg" alt="" /><br />
	  Next go to the &quot;Linker&quot; options in the project properties. Add the libs &quot;Irrlicht.lib&quot;, &quot;libIrrOde.lib&quot; and
	  &quot;ode_singe.lib&quot; to the list<br />
	  <img src="pix/libs.jpg" alt="" /><br />
	  Now add the directories of the libs added in the previous step to the linker options. These are 
	  &quot;&lt;Irrlicht Directory&gt;/lib\Win32-visualstudio&quot;, &quot;&lt;ODE Directory&gt;lib\ReleaseSingleDLL&quot; and
	  &quot;&lt;IrrOde Directory&gt;/bin\vc2008&quot;<br />
	  <img src="pix/lib_paths.jpg" alt="" /><br />
	  Next go to the &quot;C/C++ -> general&quot; tab and add &quot;&lt;Irrlicht Directory&gt;/include&quot;, 
	  &quot;&lt;ODE Directory&gt;/include&quot; and &quot;&lt;IrrOde Directory&gt;/include/IrrOde&quot;.<br />
	  <img src="pix/includepaths.jpg" alt="add include directories" /><br /><br />
	  After this replace the code generated by the wizard in the &quot;helloOdeWorld.cpp&quot; file by the following lines:
	  <pre>
#include &lt;irrlicht.h&gt;
#include &lt;IrrODE.h&gt;

using namespace irr;

using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;
using namespace ode;  //This is the namespace of all IrrODE stuff

int main(int argc, char** argv) {
  IrrlichtDevice *device=createDevice(EDT_DIRECT3D9,dimension2d<s32>(640,480),
                                      16,false,false,false,0);

  device->setWindowCaption(L"HelloOdeWorld");

  IVideoDriver* driver = device->getVideoDriver();
  ISceneManager* smgr = device->getSceneManager();
  IGUIEnvironment* guienv = device->getGUIEnvironment();

  while(device->run()) {
    driver->beginScene(true, true, SColor(0,200,200,200));

    smgr->drawAll();
    guienv->drawAll();

    driver->endScene();
  }

  device->drop();
  return 0;
}</pre>
	  Now you have to copy the files &quot;Irrlicht.dll&quot; and &quot;ode_single.dll&quot; to the directory where the executable was
	  created and IrrOde's &quot;data&quot; folder to the same place. Your project should now compile and run. You'll get an 
	  impressive gray screen.<br /><br />
	  <b>Step 2: initialize IrrOde:</b><br />
	  The first thing to do for initializing IrrODE is to register an instance of the <i>CIrrOdeSceneNodeFactory</i>.
	  <pre>
  CIrrOdeSceneNodeFactory cFactory(smgr);
  smgr->registerSceneNodeFactory(&cFactory);</pre>
	  With this scene node factory you can add all IrrOde scenenodes using the scenemanager. We'll see that later on.<br />
	  Next we init ODE using the singleton instance of the <i>CIrrOdeMananger</i> and install it. With that installation
		IrrOde gets the timer and the scene manager it needs.
	  <pre>
  CIrrOdeManager::getSharedInstance()->install(device);
	  </pre>

	<b>Step 3: load an IrrODE scene</b><br />
	Before adding objects to the system we init ODE.
	<pre>
  CIrrOdeManager::getSharedInstance()->initODE();</pre>
  The normal way of using IrrOde is to create scenes with the &quot;IrrOdEdit&quot; plugin for the 
  <a href="http://www.ambiera.com/irredit/index.html">IrrEdit</a> scene editor. See tutorial 3 for details about that,
  for the moment we just load the scene:<br />
  <pre>  smgr->loadScene("../../data/IrrOdEdit_example.xml");</pre>
	  In order to make IrrOde initialize the physics entities of the objects we have added until now we tell the worldNode to do so.
	  <pre>
  worldNode->initPhysics();</pre>
	  Note that when adding objects to the world during runtime you do also have to call the &quot;initPhysics&quot; method of the
	  object. If you do e.g. call the method of a <i>CIrrOdeBody</i> object it will also init the physics of all it's children so
	  there is not need to manually call all these methods.<br /><br />
	  Before we can see anything we need to add a camera to the scene, set it to an apropriate position and make it face the scene.
	  <pre>
  ICameraSceneNode *cam=smgr->addCameraSceneNode();
  cam->setPosition(vector3df(-20.0f, 15.0f, -20.0f));
  cam->setTarget(vector3df(0.0f,0.0f,0.0f));</pre>
	  The final thing to do is to adjust the main loop of the program so that our world get steped in each frame. Please note that the
	  default IrrODE rate is 60fps (0.016s/step), so that even if your computer makes a higher framerate IrrODE will automatically get
	  the physic's rate down to that value. Please read the ODE wiki on <a href="http://opende.sourceforge.net">their homepage</a> on
	  why it is important to have a constant time step value and all other information you may want to have.
	  <pre>
  while(device->run()) {
    CIrrOdeManager::getSharedInstance()->step();
    driver->beginScene(true, true, SColor(0,200,200,200));

    smgr->drawAll();
    guienv->drawAll();

    driver->endScene();
  }</pre>
      After all this hard and dirty work you can finally compile and run your first IrrODE application.<br />
      <img src="pix/helloIrrOdeWorld.jpg" alt="helloIrrOdeWorld screenshot" />
	</div>
  </body>
</html>